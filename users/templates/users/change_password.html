<!DOCTYPE html>
{% load static %}
<html lang="vi-vn">
<head>
    <meta charset="UTF-8">
    <title>Đổi mật khẩu</title>
    <link rel="stylesheet" href="{% static 'users/css/button.css' %}">
    <link rel="stylesheet" href="{% static 'users/css/input.css' %}">
    <link rel="stylesheet" href="{% static 'users/css/only_a_form.css' %}">
</head>
<body>
    <main>
        <form method="post">
            <h2>ĐỔI MẬT KHẨU</h2>
            {% csrf_token %}
            <input type="hidden" name="email" value="{{user.email}}"/>
            <div>
                <input required
                       type="password"
                       id="id_old_password"
                       name="old_password"
                       autocomplete="new-password"
                       placeholder="{{data.old_password.label}}"
                       title="{{data.old_password.label}}"
                       class="{% if data.old_password.errors %}error{% endif %}">
                {% for error in data.old_password.errors %}
                    <p class="error" data-ref="id_old_password">{{error}}</p>
                {% endfor %}
            </div>
            <div>
                <input required
                       type="password"
                       id="id_new_password"
                       name="new_password"
                       autocomplete="new-password"
                       placeholder="{{data.new_password.label}}"
                       title="{{data.new_password.label}}"
                       class="{% if data.new_password.errors or data.repeated_new_password.errors %}error{% endif %}">
                {% for error in data.new_password.errors %}
                    <p class="error" data-ref="id_new_password">{{error}}</p>
                {% endfor %}
            </div>
            <div>
                <input required
                       type="password"
                       id="id_repeated_new_password"
                       name="repeated_new_password"
                       autocomplete="new-password"
                       placeholder="{{data.repeated_new_password.label}}"
                       title="{{data.repeated_new_password.label}}"
                       class="{% if data.new_password.errors or data.repeated_new_password.errors %}error{% endif %}"/>
                {% for error in data.repeated_new_password.errors %}
                    <p class="error" data-ref="id_repeated_new_password">{{error}}</p>
                {% endfor %}
            </div>
            {% for error in data.errors %}
                <p data-ref>{{error}}</p>
            {% endfor %}
            <div style="position:relative;">
                <button type="submit">Đổi mật khẩu</button>
                <p id="id_previous_adjacent_link" style="position:absolute;top:0;right:-124px;width:75px;">
                    {% if data.previous_adjacent_url %}
                    <noscript>
                        <a href="{{data.previous_adjacent_url}}">Tới trang trước</a>
                    </noscript>
                    {% endif %}
                </p>
                <script>
                    if (history.length > 1) {
                        const previous_adjacent_p = document.querySelector("p#id_previous_adjacent_link");
                        const previous_adjacent_a = document.createElement("a");
                        previous_adjacent_a.innerText = "Trở lại trang trước";
                        previous_adjacent_a.setAttribute("href", "#id_previous_adjacent_link");
                        previous_adjacent_a.setAttribute("onclick", "history.back();");
                        previous_adjacent_p.innerText = "";
                        previous_adjacent_p.appendChild(previous_adjacent_a);
                    }
                </script>
            </div>
        </form>
    </main>

    <script src="{% static 'users\js\input.js' %}"></script>
</body>
</html>